<!DOCTYPE html>
<html>
<body>
    <button onclick="test()">Test</button>
    <div id="result"></div>
    
    <script>
        async function test() {
            const SUPABASE_URL = "https://uqffsnrhasfqfcswkncf.supabase.co";
            const SUPABASE_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVxZmZzbnJoYXNmcWZjc3drbmNmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njk1NzgyMDcsImV4cCI6MjA4NTE1NDIwN30.qVcKz8PuuEOBsObidm7Phmx-pw8iitYkH3Hzyc_E9Ak";
            
            document.getElementById('result').innerHTML = "Cargando Supabase...";
            
            // Cargar dinámicamente
            const script = document.createElement('script');
            script.src = 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/umd/supabase.min.js';
            script.onload = async () => {
                try {
                    const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_KEY);
                    
                    // Probar profiles primero (que sabemos que existe)
                    const { data, error } = await supabase.from('profiles').select('*').limit(1);
                    
                    if (error) {
                        document.getElementById('result').innerHTML = `ERROR profiles: ${error.message}`;
                        
                        // Probar events
                        const { data: events, error: eventsError } = await supabase.from('events').select('*').limit(1);
                        
                        if (eventsError) {
                            document.getElementById('result').innerHTML += `<br>ERROR events: ${eventsError.message}`;
                        } else {
                            document.getElementById('result').innerHTML += `<br>✅ Events OK: ${events.length} eventos`;
                        }
                    } else {
                        document.getElementById('result').innerHTML = `✅ Profiles OK: ${data.length} perfiles<br>`;
                        
                        // Ahora probar events
                        const { data: events, error: eventsError } = await supabase.from('events').select('*').limit(1);
                        
                        if (eventsError) {
                            document.getElementById('result').innerHTML += `❌ Events error: ${eventsError.message}`;
                        } else {
                            document.getElementById('result').innerHTML += `✅ Events OK: ${events.length} eventos`;
                        }
                    }
                } catch (err) {
                    document.getElementById('result').innerHTML = `EXCEPCIÓN: ${err.message}`;
                }
            };
            
            document.head.appendChild(script);
        }
    </script>
</body>
</html>
